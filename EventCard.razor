@using Myblazorapp.Models
@inject NavigationManager NavigationManager

<div class="event-card-component">
    @if (Event == null)
    {
        <div class="event-card-placeholder">
            <div class="event-image placeholder"></div>
            <div class="event-content">
                <div class="event-category placeholder" />
                <h3 class="event-title">Untitled Event</h3>
                <p class="event-location">üìç Unknown</p>
                <p class="event-date">üìÖ TBD</p>
                <div class="event-actions">
                    <button class="btn btn-secondary" disabled>View Details</button>
                </div>
            </div>
        </div>
    }
    else
    {
        <img src="@SafeImage(Event.ImageUrl)" alt="@(string.IsNullOrWhiteSpace(Event.Name) ? "Event" : Event.Name)" class="event-image" onerror="this.onerror=null;this.src='https://via.placeholder.com/400x250?text=Image+Not+Available'" />
        <div class="event-content">
            <span class="event-category">@(string.IsNullOrWhiteSpace(Event.Category) ? "General" : Event.Category)</span>
            <h3 class="event-title">@(string.IsNullOrWhiteSpace(Event.Name) ? "Untitled Event" : Event.Name)</h3>
            <p class="event-location">üìç @(string.IsNullOrWhiteSpace(Event.Location) ? "TBD" : Event.Location)</p>
            <p class="event-date">üìÖ @Event.Date.ToString("MMMM d, yyyy")</p>

            <div class="event-actions">
                <button class="btn btn-primary" @onclick="() => ViewDetails()">View Details</button>
            </div>
        </div>
    }
</div>

@code {
    [Parameter]
    public Event? Event { get; set; }

    void ViewDetails()
    {
        if (Event?.Id is int id)
        {
            NavigationManager.NavigateTo($"/event/{id}");
        }
    }

    private static string SafeImage(string? url)
    {
        if (string.IsNullOrWhiteSpace(url))
            return "https://via.placeholder.com/400x250?text=No+Image";

        try
        {
            var uri = new Uri(url);
            if (uri.Scheme == Uri.UriSchemeHttp || uri.Scheme == Uri.UriSchemeHttps)
                return url;
        }
        catch
        {
        }

        return "https://via.placeholder.com/400x250?text=No+Image";
    }
}

<style>
.event-card-component{background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(11,36,70,0.08);transition:transform .2s}
.event-card-component:hover{transform:translateY(-4px)}
.event-card-component .event-image{width:100%;height:160px;object-fit:cover}
.event-card-component .event-content{padding:1rem}
.event-category{display:inline-block;background:#0b84ff;color:#fff;padding:.3rem .6rem;border-radius:16px;font-size:.75rem;font-weight:600}
.event-title{margin:.5rem 0;font-size:1.05rem;color:#0b2545}
.event-location,.event-date{margin:0.25rem 0;color:#556b77;font-size:0.95rem}
.event-actions{margin-top:1rem}
.btn.btn-primary{background:#0b84ff;color:#fff;border:none;padding:.5rem .9rem;border-radius:6px}
</style>